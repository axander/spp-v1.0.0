<!doctype html>
<html>
<head>
	<title>Spain Podcast Premium App</title>
	<link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">
	<meta charset="UTF-8">
	<meta name="description" content="">
	<meta http-equiv="X-UA-Compatible" content="IE=11" />
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="mobile-web-app-capable" content="yes">
	<link rel="manifest" href="./assets/manifest/manifest.json">
	<link rel="stylesheet" href="./assets/styles/bootstrap.min.css">
	<script async='async' src='https://www.googletagservices.com/tag/js/gpt.js'></script>
	<script>
	  var googletag = googletag || {};
	  googletag.cmd = googletag.cmd || [];
	</script>

	<script>
		
	  	googletag.cmd.push(function() {
	  		var mappingTop = googletag.sizeMapping()
				.addSize([990, 250], [[990, 250]])
				.addSize([0, 0], [[320, 100]]).build();
		    googletag.defineSlot('/34616581/premiumpodcast.es/noticia_Right1', [300, 600], 'right1').addService(googletag.pubads());
		    googletag.defineSlot('/34616581/premiumpodcast.es/noticia_top', [990, 250], 'top').defineSizeMapping(mappingTop).addService(googletag.pubads());
		    googletag.pubads().collapseEmptyDivs();
		    googletag.enableServices();
		    //window.googletag.cmd.push(function() { window.googletag.display('right1'); })
		});
	</script>

	<script>

	  window.fbAsyncInit = function() {
		    FB.init({
		      appId      : '325411131269215',
		      cookie     : true,
		      xfbml      : true,
		      version    : 'v2.11'
		    });
		      
		    FB.AppEvents.logPageView();  

		    FB.Event.subscribe('auth.login', function () {
			    //window.location = "./#"+localStorage.getItem('lastState');
			    window.location.reload();
			  }); 
		    FB.getLoginStatus(function(response) {
			    //statusChangeCallback(response);
			    localStorage.setItem('extStatus',JSON.stringify(response)) ;
				})
	  	};

	  	function loginFb (){
			FB.login(function(response){
			  // Handle the response object, like in statusChangeCallback() in our demo
			  // code.
			  window.setSpinner();
			  console.log(response.status);
			  if (response.authResponse) {
			     response.status ==='connected' ? localStorage.setItem('extStatus',JSON.stringify(response)) : null;
			     FB.api("./#"+localStorage.getItem('lastState'), function(response) {
			        console.log('Good to see you, ' + response.name + '.');
			     });
			   } else {
			   	 setSpinner();
			     console.log('User cancelled login or did not fully authorize.');
			   }
			});
		}
		function logoutFb (){
			FB.logout(function(response){
				localStorage.removeItem('extStatus');
			  // Handle the response object, like in statusChangeCallback() in our demo
			  // code.
			});
		}
	  	function checkLoginState() {
	  		FB.AppEvents.logPageView();   
		  /*FB.getLoginStatus(function(response) {
		    //statusChangeCallback(response);
		    console.log(response);
		  });*/
		}
	  (function(d, s, id){
	     var js, fjs = d.getElementsByTagName(s)[0];
	     if (d.getElementById(id)) {return;}
	     js = d.createElement(s); js.id = id;
	     js.src = "https://connect.facebook.net/en_US/sdk.js";
	     fjs.parentNode.insertBefore(js, fjs);
	   }(document, 'script', 'facebook-jssdk'));
		</script>
		<script>
			/*------------------------
			------------------------
			------------------------
			control soft scrolling
			------------------------
			------------------------
			--------------------------*/
			Math.easeOutQuad = function (t, b, c, d) { t /= d; return -c * t*(t-2) + b; };
			(function() { // do not mess global space
			  var
			    interval, // scroll is being eased
			    mult = 200, // how fast do we scroll
			    dir = 0, // 1 = scroll down, -1 = scroll up
			    steps = 150, // how many steps in animation
			    length = 100; // how long to animate
			  function MouseWheelHandler(e) {
			    e.preventDefault(); // prevent default browser scroll
			    clearInterval(interval); // cancel previous animation
			    ++mult; // we are going to scroll faster
			    var delta = -Math.max(-1, Math.min(1, (e.wheelDelta || -e.detail))); // cross-browser
			    if(dir!=delta) { // scroll direction changed
			      mult = 1; // start slowly
			      dir = delta;
			    }
			    // in this cycle, we determine which element to scroll
			    for(var tgt=e.target; tgt!=document.documentElement; tgt=tgt.parentNode) {
			      var oldScroll = tgt.scrollTop;
			      tgt.scrollTop+= delta;
			      if(oldScroll!=tgt.scrollTop) break;
			      // else the element can't be scrolled, try its parent in next iteration
			    }
			    var start = tgt.scrollTop;
			    var end = start + length*mult*delta; // where to end the scroll
			    var change = end - start; // base change in one step
			    var step = 0; // current step
			    interval = setInterval(function() {
			      var pos = Math.easeOutQuad(step++,start,change,steps); // calculate next step
			      tgt.scrollTop = pos; // scroll the target to next step
			      if(step>=steps) { // scroll finished without speed up - stop animation
			        mult = 0; // next scroll will start slowly
			        clearInterval(interval);
			      }
			    },0);
			  }
			  // nonstandard: Chrome, IE, Opera, Safari
			  window.addEventListener("mousewheel", MouseWheelHandler, false); 
			  // nonstandard: Firefox
			  window.addEventListener("DOMMouseScroll", MouseWheelHandler, false);
			})();
		</script>
		
</head>
<body>
	<div id="root"></div>
	<spinner>
		<div class="basicOuter" ><div class="basicInner" ><svg xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.0" width="64px" height="64px" viewBox="0 0 128 128" xml:space="preserve" smiling="fake" style="&#10;    background: transparent;&#10;"><g><circle fill="#ffffff" fill-opacity="1" cx="64.125" cy="64.125" r="12.031"/><animate attributeName="opacity" dur="900ms" begin="0s" repeatCount="indefinite" keyTimes="0;0.5;1" values="0;1;0"/></g><g><path fill="#ffffff" fill-opacity="1" fill-rule="evenodd" d="M64,0A64,64,0,1,1,0,64,64,64,0,0,1,64,0Zm0,19.538A44.462,44.462,0,1,1,19.538,64,44.462,44.462,0,0,1,64,19.538Z"/><animate attributeName="opacity" dur="900ms" begin="0s" repeatCount="indefinite" keyTimes="0;0.5;1" values="1;0;1"/></g></svg></div></div>
	</spinner>
<script>
	var spinner = document.querySelector('spinner');
	var spinnerHide = true;
	spinner.className ='hide';
	function setSpinner(){
		spinnerHide = !spinnerHide;
		spinnerHide ? setTimeout(function(){ spinner.className ='hide' }, 1000) : spinner.className ='';
	}
</script>
</html>
